(this["webpackJsonpcosmart-ts"]=this["webpackJsonpcosmart-ts"]||[]).push([[0],{209:function(e,t,a){e.exports=a.p+"static/media/logo.06c81d21.svg"},227:function(e,t,a){e.exports=a(362)},237:function(e,t){},239:function(e,t){},252:function(e,t){},254:function(e,t){},282:function(e,t){},283:function(e,t){},288:function(e,t){},290:function(e,t){},297:function(e,t){},316:function(e,t){},362:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(11),i=a.n(o),l=a(431),c=a(432),s=a(21),m=a(33),p=a.n(m),u={palette:{primary:{main:"#536DFE",light:p()("#536DFE").lighten(7.5).toHexString(),dark:p()("#536DFE").darken(15).toHexString()},secondary:{main:"#FF5C93",light:p()("#FF5C93").lighten(7.5).toHexString(),dark:p()("#FF5C93").darken(15).toHexString(),contrastText:"#FFFFFF"},warning:{main:"#FFC260",light:p()("#FFC260").lighten(7.5).toHexString(),dark:p()("#FFC260").darken(15).toHexString()},success:{main:"#3CD4A0",light:p()("#3CD4A0").lighten(7.5).toHexString(),dark:p()("#3CD4A0").darken(15).toHexString()},info:{main:"#9013FE",light:p()("#9013FE").lighten(7.5).toHexString(),dark:p()("#9013FE").darken(15).toHexString()},text:{primary:"#4A4A4A",secondary:"#6E6E6E",hint:"#B9B9B9"},background:{default:"#F6F7FF",light:"#F3F5FF"}},customShadows:{widget:"0px 3px 11px 0px #E8EAFC, 0 3px 3px -2px #B2B2B21A, 0 1px 8px 0 #9A9A9A1A",widgetDark:"0px 3px 18px 0px #4558A3B3, 0 3px 3px -2px #B2B2B21A, 0 1px 8px 0 #9A9A9A1A",widgetWide:"0px 12px 33px 0px #E8EAFC, 0 3px 3px -2px #B2B2B21A, 0 1px 8px 0 #9A9A9A1A"}},d=a(210),g={default:Object(d.a)(Object(s.a)(Object(s.a)({},u),{typography:{h1:{fontSize:"3rem"},h2:{fontSize:"2rem"},h3:{fontSize:"1.64rem"},h4:{fontSize:"1.5rem"},h5:{fontSize:"1.285rem"},h6:{fontSize:"1.142rem"}}}))},f=a(129),h=a(40),b=a(15),E=a(206),y=window.location.host.split("."),x=y[0],v=y.slice(1);v.unshift("api");var w="https://"+v.join(".")+(window.location.port?":"+window.location.port:"")+"/data/"+x+"/",k=y.slice(1);k.unshift("login");var C=k.join(".")+(window.location.port?":"+window.location.port:"")+"/auth/login?ledgerId="+x,O=a(30),S=r.a.createContext({isAuthenticated:!1}),j=r.a.createContext({});function A(e,t){switch(t.type){case"LOGIN_SUCCESS":return{isAuthenticated:!0,token:t.token,party:t.party};case"LOGIN_FAILURE":case"SIGN_OUT_SUCCESS":return{isAuthenticated:!1}}}var F=function(e){var t=e.children,a=localStorage.getItem("cosmart.daml.party"),n=localStorage.getItem("cosmart.daml.token"),o=a&&n?{isAuthenticated:!0,token:n,party:a}:{isAuthenticated:!1},i=r.a.useReducer(A,o),l=Object(O.a)(i,2),c=l[0],s=l[1];return r.a.createElement(S.Provider,{value:c},r.a.createElement(j.Provider,{value:s},t))};function B(){var e=r.a.useContext(S);if(void 0===e)throw new Error("useUserState must be used within a UserProvider");return e}function I(){var e=r.a.useContext(j);if(void 0===e)throw new Error("useUserDispatch must be used within a UserProvider");return e}function N(e,t,a,n,r,o){if(o(!1),r(!0),t){var i=a||function(e){return E.sign({"https://daml.com/ledger-api":{ledgerId:x,applicationId:"cosmart",admin:!0,actAs:[e],readAs:[e]}},"secret")}(t);localStorage.setItem("cosmart.daml.party",t),localStorage.setItem("cosmart.daml.token",i),e({type:"LOGIN_SUCCESS",token:i,party:t}),o(!1),r(!1),n.push("/app")}else e({type:"LOGIN_FAILURE"}),o(!0),r(!1)}var z=function(){window.location.assign("https://".concat(C))};var L=a(61),U=a.n(L),T=a(408),R=a(410),D=a(411),W=a(74),M=a(207),H=a.n(M),P=a(433),G=a(407),_=Object(P.a)((function(e){return Object(G.a)({logotype:{color:"white",marginLeft:e.spacing(2.5),marginRight:e.spacing(2.5),fontWeight:500,fontSize:18,whiteSpace:"nowrap"},appBar:{width:"100vw",zIndex:e.zIndex.drawer+1},toolbar:{paddingLeft:e.spacing(2),paddingRight:e.spacing(2)},grow:{flexGrow:1},headerMenuButton:{marginLeft:e.spacing(2),padding:e.spacing(.5)},headerIcon:{fontSize:28,color:"rgba(255, 255, 255, 0.35)"}})})),Y=Object(b.g)((function(e){var t=e.history,a=_(),n=B(),o=I();return r.a.createElement(T.a,{position:"fixed",className:a.appBar},r.a.createElement(R.a,{className:a.toolbar},r.a.createElement(W.a,{variant:"h6",className:a.logotype},"DAML App Template"),r.a.createElement("div",{className:a.grow}),n.isAuthenticated&&r.a.createElement(W.a,{variant:"h6"},"User: ",n.party),r.a.createElement(D.a,{"aria-haspopup":"true",color:"inherit",className:a.headerMenuButton,"aria-controls":"profile-menu",onClick:function(e){return function(e,t){localStorage.removeItem("daml.party"),localStorage.removeItem("daml.token"),e({type:"SIGN_OUT_SUCCESS"}),t.push("/login")}(o,t)}},r.a.createElement(H.a,{className:a.headerIcon}))))})),q=a(435),V=a(412),J=a(365),K=a(413),Q=a(414),X=a(208),Z=a.n(X),$=Object(P.a)((function(e){return Object(G.a)({drawer:{width:180,flexShrink:0,whiteSpace:"nowrap"},toolbar:Object(s.a)({},e.mixins.toolbar),linkRoot:{},link:{textDecoration:"none","&:hover, &:focus":{backgroundColor:e.palette.background.light}},linkActive:{backgroundColor:e.palette.background.light},linkIcon:{marginRight:e.spacing(1),color:e.palette.text.secondary+"99",width:24,display:"flex",justifyContent:"center"},linkIconActive:{marginRight:e.spacing(1),width:24,display:"flex",justifyContent:"center",color:e.palette.primary.main},linkText:{padding:0,fontSize:16,color:e.palette.text.secondary+"CC"},linkTextActive:{padding:0,fontSize:16,color:e.palette.text.primary}})})),ee=function(e){var t=e.path,a=e.icon,n=e.label,o=e.location,i=$(),l=t&&(o.pathname===t||-1!==o.pathname.indexOf(t));return r.a.createElement(J.a,{button:!0,component:h.b,to:t,className:i.link,classes:{root:l?i.linkActive:i.linkRoot},disableRipple:!0},r.a.createElement(K.a,{className:l?i.linkIconActive:i.linkIcon},a),r.a.createElement(Q.a,{classes:{primary:l?i.linkTextActive:i.linkText},primary:n}))},te=Object(b.g)((function(e){var t=e.location,a=$();return r.a.createElement(q.a,{open:!0,variant:"permanent",className:a.drawer,classes:{paper:a.drawer}},r.a.createElement("div",{className:a.toolbar}),r.a.createElement(V.a,{style:{width:"100%"}},r.a.createElement(ee,{key:0,label:"Report",path:"/app/report",icon:r.a.createElement(Z.a,null),location:t})))})),ae=a(73),ne=a.n(ae),re=a(127),oe=a(424),ie=a(425),le=a(426),ce=a(427),se=a(428),me=a(423),pe=a(128),ue=a(70),de=a(419),ge=a(420),fe=a(421),he=a(422),be=a(438),Ee=a(434),ye=a(436),xe=a(415),ve=a(418);function we(e){var t=Object(n.useState)(e.defaultValue),a=Object(O.a)(t,2),o=a[0],i=a[1];var l=Object.entries(e.fields);return r.a.createElement(de.a,{open:e.open,onClose:function(){return e.onClose(null)},maxWidth:"sm",fullWidth:!0},r.a.createElement(ge.a,null,e.title),r.a.createElement(fe.a,null,l.map((function(e,t){return function(e,t){var a=Object(O.a)(e,2),n=a[0],l=a[1];return"selection"===l.type?r.a.createElement(xe.a,{key:t,fullWidth:!0},r.a.createElement(ye.a,{required:!0},l.label),r.a.createElement(Ee.a,{value:o[n],defaultValue:"",onChange:function(e){return i(Object(s.a)(Object(s.a)({},o),{},Object(ue.a)({},n,e.target.value)))}},l.items.map((function(e){return r.a.createElement(ve.a,{key:e,value:e},e)})))):r.a.createElement(be.a,{required:!0,autoFocus:!0,fullWidth:!0,key:t,label:l.label,type:l.type,onChange:function(e){return i(Object(s.a)(Object(s.a)({},o),{},Object(ue.a)({},n,e.target.value)))},InputLabelProps:{shrink:!0,required:!0},placeholder:"date"===l.type?"YYYY-MM-DD":""})}(e,t)}))),r.a.createElement(he.a,null,r.a.createElement(me.a,{onClick:function(){return e.onClose(null)},color:"primary"},"Cancel"),r.a.createElement(me.a,{onClick:function(){return e.onClose(o)},color:"primary"},"Okay")))}var ke=Object(P.a)((function(e){return Object(G.a)({tableCell:{verticalAlign:"top",paddingTop:6,paddingBottom:6,fontSize:"0.75rem"},tableCellButton:{verticalAlign:"center",paddingTop:0,paddingBottom:0,fontSize:"0.75rem"},tableRow:{height:"auto"},textField:{fontSize:"0.75rem"},textFieldUnderline:{"&:before":{borderBottomColor:e.palette.primary.light},"&:after":{borderBottomColor:e.palette.primary.main},"&:hover:before":{borderBottomColor:"".concat(e.palette.primary.light," !important")}},choiceButton:{paddingTop:0,paddingBottom:0}})}));function Ce(){var e=ke(),t=Object(L.useParty)(),a=Object(L.useLedger)(),o=Object(L.useStreamQuery)(pe.Network).contracts,i={open:!1,title:"Invite Customs Mar",defaultValue:{customsMar:""},fields:{customsMar:{label:"customs Mar",type:"text"}},onClose:function(){var e=Object(re.a)(ne.a.mark((function e(){return ne.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},l=Object(n.useState)(i),c=Object(O.a)(l,2),m=c[0],p=c[1];return r.a.createElement(r.a.Fragment,null,r.a.createElement(we,m),r.a.createElement(oe.a,{size:"small"},r.a.createElement(ie.a,null,r.a.createElement(le.a,{className:e.tableRow},r.a.createElement(ce.a,{key:5,className:e.tableCell},"options"))),r.a.createElement(se.a,null,o.map((function(n){return r.a.createElement(le.a,{key:n.contractId,className:e.tableRow},r.a.createElement(ce.a,{key:6,className:e.tableCellButton},r.a.createElement(me.a,{color:"primary",size:"small",className:e.choiceButton,variant:"contained",disabled:n.payload.operator!==t,onClick:function(){return function(e){function t(){return(t=Object(re.a)(ne.a.mark((function t(n){return ne.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return p(Object(s.a)(Object(s.a)({},i),{},{open:!1})),t.next=3,a.exercise(pe.Network.InviteCustomsMar,e.contractId,n);case 3:case"end":return t.stop()}}),t)})))).apply(this,arguments)}p(Object(s.a)(Object(s.a)({},i),{},{open:!0,onClose:function(e){return t.apply(this,arguments)}}))}(n)}},"InviteCustomsMar")))})))))}var Oe=Object(P.a)((function(e){return Object(G.a)({root:{display:"flex",maxWidth:"100vw",overflowX:"hidden"},content:{flexGrow:1,padding:e.spacing(3),width:"calc(100vw - ".concat(240+e.spacing(6),"px)"),minHeight:"100vh"},fakeToolbar:Object(s.a)({},e.mixins.toolbar)})})),Se=Object(b.g)((function(){var e=Oe(),t=B();return t.isAuthenticated?r.a.createElement(U.a,{party:t.party,token:t.token,httpBaseUrl:w,wsBaseUrl:void 0},r.a.createElement("div",{className:e.root},r.a.createElement(r.a.Fragment,null,r.a.createElement(Y,null),r.a.createElement(te,null),r.a.createElement("div",{className:e.content},r.a.createElement("div",{className:e.fakeToolbar}),r.a.createElement(b.d,null,r.a.createElement(b.b,{path:"/app/report",component:Ce})))))):null})),je=a(429),Ae=a(213),Fe=Object(P.a)((function(e){return Object(G.a)({container:{height:"100vh",width:"100vw",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",position:"absolute",top:0,left:0},paperRoot:{display:"flex",flexDirection:"column",alignItems:"center",paddingTop:e.spacing(8),paddingBottom:e.spacing(8),paddingLeft:e.spacing(6),paddingRight:e.spacing(6),maxWidth:404},errorCode:{marginBottom:e.spacing(5),fontSize:84,fontWeight:600},safetyText:{marginBottom:e.spacing(5),fontWeight:300,color:e.palette.text,textAlign:"center"},backButton:{textTransform:"none",fontSize:22}})})),Be=function(){var e=Fe();return r.a.createElement(je.a,{container:!0,className:e.container},r.a.createElement(Ae.a,{classes:{root:e.paperRoot}},r.a.createElement(W.a,{variant:"h3",color:"primary",className:e.errorCode},"404"),r.a.createElement(W.a,{variant:"h5",color:"primary",className:e.safetyText},"Oops. Looks like the page you're looking for no longer exists"),r.a.createElement(me.a,{variant:"contained",color:"primary",component:h.b,to:"/",size:"large",className:e.backButton},"Back to Home")))},Ie=a(430),Ne=a(214),ze=Object(P.a)((function(e){return Object(G.a)({container:{height:"100vh",width:"100vw",display:"flex",justifyContent:"center",alignItems:"center",position:"absolute",top:0,left:0},logotypeContainer:{backgroundColor:e.palette.background.default,width:"60%",height:"100%",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"},logotypeImage:{width:165,marginBottom:e.spacing(4)},logotypeText:{color:"#3a478f",fontWeight:500,fontSize:64},formContainer:{width:"40%",height:"100%",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"},form:{width:320},tab:{fontWeight:400,fontSize:18},dablLoginButton:{marginBottom:e.spacing(2)},errorMessage:{textAlign:"center"},textFieldUnderline:{"&:before":{borderBottomColor:e.palette.primary.light},"&:after":{borderBottomColor:e.palette.primary.main},"&:hover:before":{borderBottomColor:"".concat(e.palette.primary.light," !important")}},textField:{borderBottomColor:e.palette.background.light},formButtons:{width:"100%",marginTop:e.spacing(4),display:"flex",justifyContent:"space-between",alignItems:"center"},loginLoader:{marginLeft:e.spacing(4)}})})),Le=a(209),Ue=a.n(Le),Te=Object(b.g)((function(e){var t=ze(),a=I(),o=Object(n.useState)(!1),i=Object(O.a)(o,2),l=i[0],c=i[1],s=Object(n.useState)(!1),m=Object(O.a)(s,2),p=m[0],u=m[1],d=Object(n.useState)(""),g=Object(O.a)(d,2),f=g[0],h=g[1],b=Object(n.useState)(""),E=Object(O.a)(b,2),y=E[0],x=E[1];return r.a.createElement(je.a,{container:!0,className:t.container},r.a.createElement("div",{className:t.logotypeContainer},r.a.createElement("img",{src:Ue.a,alt:"logo",className:t.logotypeImage}),r.a.createElement(W.a,{className:t.logotypeText},"App Template")),r.a.createElement("div",{className:t.formContainer},r.a.createElement("div",{className:t.form},r.a.createElement(r.a.Fragment,null,r.a.createElement(Ne.a,{in:p},r.a.createElement(W.a,{color:"secondary",className:t.errorMessage},"Something is wrong with your login or password :(")),r.a.createElement(r.a.Fragment,null,r.a.createElement(me.a,{className:t.dablLoginButton,variant:"contained",color:"primary",size:"large",onClick:z},"Log in with DABL"),r.a.createElement(W.a,null,"OR")),r.a.createElement(be.a,{id:"email",InputProps:{classes:{underline:t.textFieldUnderline,input:t.textField}},value:f,onChange:function(e){return h(e.target.value)},onKeyDown:function(t){"Enter"===t.key&&N(a,f,y,e.history,c,u)},margin:"normal",placeholder:"Username",type:"email",fullWidth:!0}),r.a.createElement(be.a,{id:"password",InputProps:{classes:{underline:t.textFieldUnderline,input:t.textField}},value:y,onChange:function(e){return x(e.target.value)},onKeyDown:function(t){"Enter"===t.key&&N(a,f,y,e.history,c,u)},margin:"normal",placeholder:"Password",type:"password",fullWidth:!0}),r.a.createElement("div",{className:t.formButtons},l?r.a.createElement(Ie.a,{size:26,className:t.loginLoader}):r.a.createElement(me.a,{disabled:0===f.length,onClick:function(){return N(a,f,y,e.history,c,u)},variant:"contained",color:"primary",size:"large"},"Login"))))))}));function Re(){var e=B();return r.a.createElement(h.a,null,r.a.createElement(b.d,null,r.a.createElement(b.b,{exact:!0,path:"/",component:function(){var e=I();return Object(n.useEffect)((function(){var t=new URL(window.location.toString()),a=t.searchParams.get("token");if(null!==a){var n=t.searchParams.get("party");if(null===n)throw Error("When 'token' is passed via URL, 'party' must be passed too.");localStorage.setItem("cosmart.daml.party",n),localStorage.setItem("cosmart.daml.token",a),e({type:"LOGIN_SUCCESS",token:a,party:n})}})),r.a.createElement(b.a,{to:"/app/report"})}}),r.a.createElement(b.b,{exact:!0,path:"/app",render:function(){return r.a.createElement(b.a,{to:"/app/report"})}}),r.a.createElement(t,{path:"/app",component:Se}),r.a.createElement(a,{path:"/login",component:Te}),r.a.createElement(b.b,{component:Be})));function t(t){var a=t.component,n=Object(f.a)(t,["component"]);return r.a.createElement(b.b,Object.assign({},n,{render:function(t){return e.isAuthenticated?r.a.createElement(a,t):r.a.createElement(b.a,{to:{pathname:"/login",state:{from:t.location}}})}}))}function a(t){var a=t.component,n=Object(f.a)(t,["component"]);return r.a.createElement(b.b,Object.assign({},n,{render:function(t){return e.isAuthenticated?r.a.createElement(b.a,{to:{pathname:"/"}}):r.a.createElement(a,t)}}))}}i.a.render(r.a.createElement(F,null,r.a.createElement(l.a,{theme:g.default},r.a.createElement(c.a,null),r.a.createElement(Re,null))),document.getElementById("root"))}},[[227,1,2]]]);
//# sourceMappingURL=main.4862f3e1.chunk.js.map